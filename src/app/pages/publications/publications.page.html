<app-header></app-header>

<ion-content>
  <ion-row>
    <ion-col>
      <h1 class="t-s ion-text-center">Mis publicaciones</h1>
    </ion-col>
  </ion-row>

  <div>
    <ion-list *ngIf="myPublications">
      <ion-card *ngFor="let publication of myPublications">
        <ion-card-header style="padding: 5px;">
          <ion-card-title style="margin-left: 10px;">{{publication?.user_id?.name}}</ion-card-title>
          <ion-card-subtitle>
            <ion-row>
              <ion-col size="10">
                {{publication?.created_at | date: 'short'}}
              </ion-col>
              <ion-col size="2" style="float: right;">
                <ion-avatar>
                  <img alt="Silhouette of a person's head" [src]="publication?.user_id?.image" />
                </ion-avatar>
              </ion-col>
            </ion-row>
          </ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <div>
            {{publication.text}}
          </div>
          <div>
            <img [src]="publication?.file" style="border-radius: 5px; width: 100%; height: 220px;" />
          </div>
          <div style="float: right;">
            <ion-button size="small" color="danger" (click)="delete(publication.id)">Borrar</ion-button>
            <ion-button size="small" (click)="triggerFileInput(publication.id)">Cargar imagen</ion-button>
            <input type="file" #fileInput accept="image/*" style="display: none;"
              (change)="onFileSelected(publication.id, $event)">
          </div>
        </ion-card-content>
      </ion-card>
    </ion-list>
  </div>
</ion-content>
